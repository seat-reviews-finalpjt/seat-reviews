<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Notification Test</title>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const userId = {{ request.user.id }};
            const notificationSocket = new WebSocket(
                'ws://' + window.location.host + '/ws/notifications/' + userId + '/'
            );

            notificationSocket.onmessage = function (event) {
                const data = JSON.parse(event.data);
                alert(data.message);
            };

            notificationSocket.onclose = function (event) {
                console.error('Notification socket closed unexpectedly');
            };
        });
    </script>
</head>
<body>
    {% block content %}
    {% endblock %}
</body>
</html>

